<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Shade Generator</title>
    <style>
        #colorSquare, #newColorSquare {
            width: 200px;
            height: 200px;
            margin-bottom: 10px;
            display: inline-block; /* Display the squares inline */
            margin-right: 10px; /* Add some margin between the squares */
            border: 2px solid #000; /* Add a blank border with 2px thickness */
        }
        

        #newHexDisplay {
            font-size: 18px;
            margin-top: 10px;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input {
            margin-bottom: 10px;
        }

        button {
            margin-top: 10px;
            padding: 5px 10px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="colorSquare"></div>
    <div id="newColorSquare"></div>
    
    <br>

    <label for="colorInput">Enter Color (Hex): </label>
    <input type="text" id="colorInput" placeholder="e.g., #ff5733" oninput="updateColorSquare()">
    <br>
    
    <label for="percentInput">Enter Percent: </label>
    <input type="number" id="percentInput" placeholder="e.g., 10">
    <br>

    <label for="colorPicker">Pick a Color: </label>
    <input type="color" id="colorPicker" onchange="updateColor()">
    <br>

    

    <button onclick="generateNewColor()">Generate New Color</button>
    
    <div id="newHexDisplay"></div>
    

    <script>
        function generateNewColor() {
            // Get input values
            var colorInput = document.getElementById("colorInput").value;
            var percentInput = parseFloat(document.getElementById("percentInput").value);

            // Validate inputs
            if (!isValidHex(colorInput) || isNaN(percentInput)) {
                alert("Invalid input. Please enter a valid color hex code and a valid percentage.");
                return;
            }

            // Calculate new color
            var newColor = calculateShade(colorInput, percentInput);

            // Update color squares
            document.getElementById("colorSquare").style.backgroundColor = colorInput;
            document.getElementById("newColorSquare").style.backgroundColor = newColor;

            // Display new hex color
            document.getElementById("newHexDisplay").textContent = "New Hex Color: " + newColor;
        }

        function updateColor() {
            var colorPicker = document.getElementById("colorPicker");
            var colorInput = document.getElementById("colorInput");

            // Update the manual input field with the selected color
            colorInput.value = colorPicker.value;

            // Trigger generation of new color
            generateNewColor();
        }

        function updateColorSquare() {
            var colorInput = document.getElementById("colorInput").value;

            // Add "#" if it's not already there
            if (!colorInput.startsWith("#")) {
                colorInput = "#" + colorInput;
            }

            // Update color square
            document.getElementById("colorSquare").style.backgroundColor = colorInput;
        }

        function isValidHex(hex) {
            // Regular expression to check if the hex code is valid
            var hexRegex = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/;
            return hexRegex.test(hex);
        }

        function calculateShade(hex, percent) {
            // Convert hex to RGB
            var r = parseInt(hex.substring(1, 3), 16);
            var g = parseInt(hex.substring(3, 5), 16);
            var b = parseInt(hex.substring(5, 7), 16);

            // Calculate new RGB values
            r = Math.round(r - r * (percent / 100));
            g = Math.round(g - g * (percent / 100));
            b = Math.round(b - b * (percent / 100));

            // Ensure values are in the valid range (0-255)
            r = Math.max(0, Math.min(r, 255));
            g = Math.max(0, Math.min(g, 255));
            b = Math.max(0, Math.min(b, 255));

            // Convert back to hex
            var newHex = "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);

            return newHex;
        }

        function componentToHex(c) {
            var hex = c.toString(16);
            return hex.length == 1 ? "0" + hex : hex;
        }
    </script>

</body>
</html>
